# 回滚标签与操作流程

## 标签记录
- 备份标签：`backup-20251118_234745`
- 回滚标签：`rollback-20251118_234745`
- 创建时间：`2025-11-18`

## 回滚前准备
- 确认当前分支和工作区状态：
  - `git status`
- 如有未保存改动，建议先暂存：
  - `git stash` 或手动提交
- PowerShell 不支持 `&&`，多命令请使用分号或 `&` 分隔。

## 回滚到备份标签
- 强制回滚工作区到备份点（覆盖未提交改动）：
  - `git reset --hard backup-20251118_234745`
- 验证回滚结果：
  - `git log -n 3`
  - `git status`

## 恢复到当前快照标签
- 如果需要恢复到当前提交，对应“回滚标签”：
  - `git reset --hard rollback-20251118_234745`
- 验证恢复：
  - `git log -n 3`

## 以分支方式检出标签（安全比对）
- 从备份标签创建临时分支进行对比，而不影响现有分支：
  - `git checkout -b temp-from-backup backup-20251118_234745`
- 与当前分支对比差异：
  - `git diff temp-from-backup..<当前分支名>`
- 决定是否合并或挑拣提交：
  - `git cherry-pick <commit_sha>` 或 `git merge temp-from-backup`

## 推送到远端（如已配置远端）
- 推送当前分支和标签：
  - `git push origin <当前分支名>`
  - `git push origin --tags`

## 常见问题
- 标签不存在：
  - 执行 `git tag` 查看标签是否存在
  - 若缺失，请联系维护者或重新创建标签
- 工作区有未提交改动导致回滚失败：
  - 使用 `git stash` 保存改动，或提交后再回滚
- 回滚后发现数据不符合预期：
  - 通过日志 `git log` 和差异 `git diff` 核对提交范围

## 快速命令（PowerShell）
- 查看所有标签：`git tag`
- 查看最近提交：`git log -n 5`
- 清理未跟踪文件（慎用）：`git clean -fd`