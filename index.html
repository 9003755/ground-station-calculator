<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>地面站简易科学计算器</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="topbar">科学计算器</div>
<div class="app">
  <aside class="nav">
    <button class="nav-item active" data-target="calc-basic">简易计算器</button>
    <button class="nav-item" data-target="calc-triangle">三角形计算器</button>
    <button class="nav-item" data-target="calc-bearing">航向角计算器</button>
    <button class="nav-item" data-target="calc-geo">任意两点间航向和距离计算器</button>
    <button class="nav-item" data-target="calc-speed">速度单位换算</button>
  </aside>
  <main class="content">
    <section id="calc-basic" class="view active">
      <div class="display">
        <div id="basic-expr" class="expr"></div>
        <div id="basic-display" class="value">0</div>
      </div>
      <div class="keypad">
        <button data-action="clear">C</button>
        <button data-action="back">⌫</button>
        <button data-action="sqrt">√x</button>
        <button data-action="square">x²</button>
        <button data-digit="7">7</button>
        <button data-digit="8">8</button>
        <button data-digit="9">9</button>
        <button data-op="/">÷</button>
        <button data-digit="4">4</button>
        <button data-digit="5">5</button>
        <button data-digit="6">6</button>
        <button data-op="*">×</button>
        <button data-digit="1">1</button>
        <button data-digit="2">2</button>
        <button data-digit="3">3</button>
        <button data-op="-">−</button>
        <button data-digit="0" class="span-2">0</button>
        <button data-digit=".">.</button>
        <button data-op="+">+</button>
        <button data-action="equals" class="equals">=</button>
      </div>
    </section>

    <section id="calc-triangle" class="view">
      <div class="tabbar">
        <button class="tab active" data-tri-tab="asa">已知两角一边</button>
        <button class="tab" data-tri-tab="sas">两边及夹角</button>
        <button class="tab" data-tri-tab="sss">已知三边解角</button>
      </div>
      <div id="tri-form-asa" class="form">
        <label>角A(°)<input type="number" id="tri-A" step="0.000001"></label>
        <label>角B(°)<input type="number" id="tri-B" step="0.000001"></label>
        <label>已知边长<input type="number" id="tri-known-side" step="0.000001"></label>
        <div class="radio-group">
          <label>
            <input type="radio" name="tri-known" value="a" checked>
            <span class="label-text"><span>已知边长</span><span>对应角A</span></span>
          </label>
          <label>
            <input type="radio" name="tri-known" value="b">
            <span class="label-text"><span>已知边长</span><span>对应角B</span></span>
          </label>
          <label>
            <input type="radio" name="tri-known" value="c">
            <span class="label-text"><span>已知边长</span><span>对应角C</span></span>
          </label>
        </div>
        <button id="tri-asa-calc">计算</button>
      </div>
      <div id="tri-form-sas" class="form" style="display:none">
        <label>夹角(°)<input type="number" id="tri-sas-angle" step="0.000001"></label>
        <div class="radio-group">
          <label><input type="radio" name="tri-sas-angle-name" value="A" checked> 角A</label>
          <label><input type="radio" name="tri-sas-angle-name" value="B"> 角B</label>
          <label><input type="radio" name="tri-sas-angle-name" value="C"> 角C</label>
        </div>
        <label>边1<input type="number" id="tri-sas-side1" step="0.000001"></label>
        <label>边2<input type="number" id="tri-sas-side2" step="0.000001"></label>
        <button id="tri-sas-calc">计算</button>
      </div>
      <div id="tri-form-sss" class="form" style="display:none">
        <label>边a<input type="number" id="tri-sss-a" step="0.000001"></label>
        <label>边b<input type="number" id="tri-sss-b" step="0.000001"></label>
        <label>边c<input type="number" id="tri-sss-c" step="0.000001"></label>
        <button id="tri-sss-calc">计算</button>
      </div>
      <div class="result grid-2">
        <div>
          <div>角A(°)：<span id="tri-out-A">-</span></div>
          <div>角B(°)：<span id="tri-out-B">-</span></div>
          <div>角C(°)：<span id="tri-C">-</span></div>
        </div>
        <div>
          <div>边a：<span id="tri-a">-</span></div>
          <div>边b：<span id="tri-b">-</span></div>
          <div>边c：<span id="tri-c">-</span></div>
        </div>
      </div>
    </section>

    <section id="calc-bearing" class="view">
      <div class="form">
        <label>A→B航向角(°)<input type="number" id="bearing-ab" step="0.000001"></label>
        <button id="bearing-calc">计算</button>
      </div>
      <div class="result">B→A航向角(°)：<span id="bearing-ba">-</span></div>
    </section>

    <section id="calc-geo" class="view">
      <div class="form grid-2">
        <div>
          <h4>A点</h4>
          <label>经度(°)<input type="number" id="geo-lon1" step="0.000001"></label>
          <label>纬度(°)<input type="number" id="geo-lat1" step="0.000001"></label>
        </div>
        <div>
          <h4>B点</h4>
          <label>经度(°)<input type="number" id="geo-lon2" step="0.000001"></label>
          <label>纬度(°)<input type="number" id="geo-lat2" step="0.000001"></label>
        </div>
      </div>
      <div class="form">
        <div id="ocr-area" class="paste-area" tabindex="0">在此处粘贴或拖拽图片，自动识别经纬度</div>
        <div id="ocr-output" class="ocr-output"></div>
      </div>
      <div class="form">
        <button id="geo-calc">计算</button>
        <button id="geo-clear">刷新</button>
      </div>
      <div class="result">
        <div>距离(m)：<span id="geo-dist">-</span></div>
        <div>A→B航向角(°)：<span id="geo-bearing-ab">-</span></div>
        <div>B→A航向角(°)：<span id="geo-bearing-ba">-</span></div>
      </div>
    </section>

    <section id="calc-speed" class="view">
      <div class="form">
        <label>速度值<input type="number" id="speed-value" step="0.000001"></label>
        <label>输入单位
          <select id="speed-unit">
            <option value="kmh">公里/小时（km/h）</option>
            <option value="kmh2">千米/小时（km/h）</option>
            <option value="ms">米/秒（m/s）</option>
            <option value="kmmin">千米/分钟（km/min）</option>
            <option value="mmin">米/分钟（m/min）</option>
          </select>
        </label>
        <button id="speed-calc">换算</button>
      </div>
      <div class="result">
        <div>公里/小时（km/h）：<span id="out-kmh">-</span></div>
        <div>米/秒（m/s）：<span id="out-ms">-</span></div>
        <div>千米/分钟（km/min）：<span id="out-kmmin">-</span></div>
        <div>米/分钟（m/min）：<span id="out-mmin">-</span></div>
      </div>
    </section>
  </main>
</div>
<div class="footer">by:海边的飞行器 18520403199</div>
<script>
(function(){
 var urls=[
  'https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js',
  'https://unpkg.com/tesseract.js@5/dist/tesseract.min.js',
  'https://cdnjs.cloudflare.com/ajax/libs/tesseract.js/5.0.3/tesseract.min.js'
 ];
 function load(i){
  if(i>=urls.length){window.__ocrLoadError=true;return}
  var s=document.createElement('script');
  s.src=urls[i];
  s.onload=function(){window.__ocrLoaded=true};
  s.onerror=function(){load(i+1)};
  document.head.appendChild(s);
 }
 load(0);
})();
</script>
<script src="app.js"></script>
</body>
</html>
